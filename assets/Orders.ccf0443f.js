import{_ as L,r as _,x as M,b as a,c as l,d as e,t as v,y as X,f as y,e as n,m as h,v as E,q as O,F as D,h as W,s as ae,l as le,p as z,i as B,o as se,a as oe,g as V,z as q,T as P,B as Y}from"./index.de4ae447.js";import{O as F}from"./orders-service.21dc97a2.js";import{h as U,T as ne}from"./moment.0a9447d3.js";/* empty css                                                              */const x=t=>(z("data-v-2f8e9635"),t=t(),B(),t),ie={id:"dialog-user"},re=["onSubmit"],ce={class:"header-dialog flex align-items-center justify-content-center"},ue={key:0,class:"field"},de=x(()=>e("label",{for:"email"},"E-mail:",-1)),me={key:0,class:"info-view"},ve={key:2,style:{color:"red"}},fe={key:1,class:"field"},_e=x(()=>e("label",{for:"first_name"},"Nombre:",-1)),ye={key:0,style:{color:"red"}},pe={key:2,class:"field"},he=x(()=>e("label",{for:"last_name"},"Apellido:",-1)),ge={key:0,style:{color:"red"}},be={key:3,class:"field"},xe={for:"password"},Ee={key:0,style:{color:"red"}},ke={key:4,class:"field"},Ve=x(()=>e("label",{for:"phone"},"Tel\xE9fono:",-1)),Ce={key:0,class:"info-view"},Ie={key:2,style:{color:"red"}},$e={key:5,class:"field"},we=x(()=>e("label",{for:"birthday"},"Cumplea\xF1os:",-1)),Ae={key:0,class:"info-view"},De={key:6,class:"field"},We=x(()=>e("label",{for:"role"},"Tipo de usuario:",-1)),Se={key:0,class:"info-view"},Te=["value"],je={key:2,style:{color:"red"}},Ue={key:7,class:"field"},Ne=x(()=>e("label",{for:"created"},"Registrado:",-1)),Oe={key:0,class:"info-view"},Me={key:8,class:"field"},Xe=x(()=>e("label",{for:"updated"},"Ultima Actualizaci\xF3n:",-1)),qe={key:0,class:"info-view"},Pe={key:9,class:"field"},Ye=x(()=>e("label",{for:"orders"},"Ordenes:",-1)),Le={key:0,class:"info-view"},ze={key:10,class:"field"},Be=x(()=>e("label",{for:"directions"},"Direcciones:",-1)),Fe={key:0,class:"info-view"},Re={key:11,class:"flex flex align-items-center"},Ge=x(()=>e("label",{class:"col-1 pl-0",for:"is_active"},"Estado:",-1)),He={key:0,class:"info-view col-11 flex align-items-center"},Je={key:1,class:"col-11 flex align-items-center"},Ke={key:12,class:"confirmation-content"},Qe=x(()=>e("br",null,null,-1)),Ze=x(()=>e("i",null,"(Esta acci\xF3n no se puede revertir, y eliminara las direcciones y ordenes vinculadas a este Usuario)",-1)),et={class:"field flex align-items-center justify-content-center"},tt=["value"],at={__name:"DialogOrder",props:["type","order"],emits:["close_dialog","toast_execute"],setup(t,{emit:i}){const g=t,u=_(g.order),d=_(new F),p=_(!1),S=_([{name:"Seleccionar",code:null},{name:"Cliente",code:"CLIENT"},{name:"Administrador",code:"ADMIN"}]),N=()=>{p.value=!0;let s={};switch(g.type){case"EDIT":d.value.updateUser(u.value.id,u.value).then(()=>{i("toast_execute","Usuario editado exitosamente","success"),i("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),i("toast_execute","Ocurrio un problema al editar el Usuario","error"),i("close_dialog",!1)});break;case"DEL":d.value.deleteOrder(u.value.order_code).then(()=>{i("toast_execute","Usuario eliminado exitosamente","success"),i("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),i("toast_execute","Ocurrio un problema al eliminar el Usuario","error"),i("close_dialog",!1)});break;case"PASS":s={email:user_template.value.email,password:user_template.value.password},d.value.changePass(u.value.id,s).then(()=>{i("toast_execute","Contrase\xF1a cambiada exitosamente","success"),i("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),i("toast_execute","Ocurrio un problema al cambiar la contrase\xF1a","error"),i("close_dialog",!1)});break;case"AVATAR":s={email:user_template.value.email,avatar:user_template.value.avatar},d.value.changeAvatar(u.value.id).then(()=>{i("toast_execute","Avatar cambiado exitosamente","success"),i("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),i("toast_execute","Ocurrio un problema al cambiar el avatar","error"),i("close_dialog",!1)});break;default:s={email:u.value.email,is_active:u.value.is_active},d.value.changeActive(u.value.id,s).then(()=>{i("toast_execute","Cambio de estado con exito","success"),i("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),i("toast_execute","Ocurrio un problema al cambiar el estado","error"),i("close_dialog",!1)})}p.value=!1},T=M(()=>{switch(g.type){case"EDIT":return"Editar Pedido";case"DEL":return"Eliminar Pedido";case"AVATAR":return"Cambiar el Avatar";case"ACTIVE":return"Cambiar Estado";case"PASS":return"Cambiar Contrase\xF1a";default:return"Pedido "+u.value.order_code}}),j=M(()=>{switch(g.type){case"NEW":return"Crear";case"EDIT":return"Guardar Cambios";case"DEL":return"Eliminar";default:return"Cambiar"}}),$=s=>s?(U.locale("es"),U(String(s)).format("DD-MMMM-YYYY")):"Sin Fecha",w=s=>s?U(String(s)).locale("es").format("DD-MM-YYYY [Hora:] hh:mm"):"Sin Fecha",C=s=>{switch(s){case"ADMIN":return"Administrador";default:return"Cliente"}},A=s=>{switch(s){case!0:return"Valido";default:return"Invalido"}};return(s,r)=>(a(),l("div",ie,[e("form",{class:"dialog-content",onSubmit:le(N,["prevent"])},[e("div",ce,v(X(T)),1),t.type=="EDIT"||t.type=="NEW"||t.type=="VIEW"?(a(),l("div",ue,[de,y(),t.type=="VIEW"?(a(),l("span",me,v(s.user_template.email),1)):n("",!0),t.type!="VIEW"?h((a(),l("input",{key:1,id:"email","onUpdate:modelValue":r[0]||(r[0]=f=>s.user_template.email=f),required:"true",type:"text",autofocus:"",placeholder:"E-mail",class:"outline-none",name:"email"},null,512)),[[E,s.user_template.email,void 0,{trim:!0}]]):n("",!0),p.value&&!s.user_template.email?(a(),l("small",ve,"El E-mail es requerido.")):n("",!0)])):n("",!0),t.type=="EDIT"||t.type=="NEW"?(a(),l("div",fe,[_e,h(e("input",{id:"first_name","onUpdate:modelValue":r[1]||(r[1]=f=>s.user_template.first_name=f),required:"true",type:"text",autofocus:"",placeholder:"Nombre",class:"outline-none",name:"first_name"},null,512),[[E,s.user_template.first_name,void 0,{trim:!0}]]),p.value&&!s.user_template.first_name?(a(),l("small",ye,"El Nombre es requerido.")):n("",!0)])):n("",!0),t.type=="EDIT"||t.type=="NEW"?(a(),l("div",pe,[he,h(e("input",{id:"last_name","onUpdate:modelValue":r[2]||(r[2]=f=>s.user_template.last_name=f),required:"true",type:"text",autofocus:"",placeholder:"Apellido",class:"outline-none",name:"last_name"},null,512),[[E,s.user_template.last_name,void 0,{trim:!0}]]),p.value&&!s.user_template.last_name?(a(),l("small",ge,"El Apellido es requerido.")):n("",!0)])):n("",!0),t.type=="PASS"||t.type=="NEW"?(a(),l("div",be,[e("label",xe,v(t.type!="PASS"?"Contrase\xF1a":"Nueva contrase\xF1a")+":",1),h(e("input",{id:"password","onUpdate:modelValue":r[3]||(r[3]=f=>s.user_template.password=f),required:"true",type:"password",autofocus:"",placeholder:"Contrase\xF1a",class:"outline-none",name:"password"},null,512),[[E,s.user_template.password,void 0,{trim:!0}]]),p.value&&!s.user_template.password?(a(),l("small",Ee,"La contrase\xF1a es requerida.")):n("",!0)])):n("",!0),t.type=="EDIT"||t.type=="NEW"||t.type=="VIEW"?(a(),l("div",ke,[Ve,y(),t.type=="VIEW"?(a(),l("span",Ce,v(u.value.phone),1)):n("",!0),t.type!="VIEW"?h((a(),l("input",{key:1,id:"phone","onUpdate:modelValue":r[4]||(r[4]=f=>u.value.phone=f),required:"true",type:"text",autofocus:"",placeholder:"9XXXXXXXX",class:"outline-none",name:"phone"},null,512)),[[E,u.value.phone,void 0,{trim:!0}]]):n("",!0),p.value&&!u.value.phone?(a(),l("small",Ie,"El Telefono es requerido.")):n("",!0)])):n("",!0),t.type=="EDIT"||t.type=="VIEW"?(a(),l("div",$e,[we,y(),t.type=="VIEW"?(a(),l("span",Ae,v($(s.user_template.birthday)),1)):n("",!0),t.type!="VIEW"?h((a(),l("input",{key:1,id:"birthday","onUpdate:modelValue":r[5]||(r[5]=f=>u.value.birthday=f),required:"true",type:"date",autofocus:"",placeholder:"9XXXXXXXX",class:"outline-none",name:"birthday"},null,512)),[[E,u.value.birthday,void 0,{trim:!0}]]):n("",!0)])):n("",!0),t.type=="EDIT"||t.type=="NEW"||t.type=="VIEW"?(a(),l("div",De,[We,y(),t.type=="VIEW"?(a(),l("span",Se,v(C(s.user_template.role)),1)):n("",!0),t.type!="VIEW"?h((a(),l("select",{key:1,id:"role","onUpdate:modelValue":r[6]||(r[6]=f=>s.user_template.role=f)},[(a(!0),l(D,null,W(S.value,(f,b)=>(a(),l("option",{key:b,value:f.code},v(f.name),9,Te))),128))],512)),[[O,s.user_template.role]]):n("",!0),p.value&&!u.value.role?(a(),l("small",je,"El tipo de usuario es requerido.")):n("",!0)])):n("",!0),t.type=="VIEW"?(a(),l("div",Ue,[Ne,y(),t.type=="VIEW"?(a(),l("span",Oe,v(w(s.user_template.created)),1)):n("",!0)])):n("",!0),t.type=="VIEW"?(a(),l("div",Me,[Xe,y(),t.type=="VIEW"?(a(),l("span",qe,v(w(s.user_template.updated)),1)):n("",!0)])):n("",!0),t.type=="VIEW"?(a(),l("div",Pe,[Ye,y(),t.type=="VIEW"?(a(),l("span",Le,v(s.user_template.orders?s.user_template.orders.length:"0"),1)):n("",!0)])):n("",!0),t.type=="VIEW"?(a(),l("div",ze,[Be,y(),t.type=="VIEW"?(a(),l("span",Fe,v(s.user_template.directions?s.user_template.directions.length:"0"),1)):n("",!0)])):n("",!0),t.type=="ACTIVE"||t.type=="VIEW"?(a(),l("div",Re,[Ge,y(),t.type=="VIEW"?(a(),l("span",He,v(A(s.user_template.is_active)),1)):n("",!0),t.type!="VIEW"?(a(),l("div",Je,[h(e("input",{type:"checkbox","onUpdate:modelValue":r[7]||(r[7]=f=>u.value.is_active=f)},null,512),[[ae,u.value.is_active]])])):n("",!0)])):n("",!0),t.type=="DEL"?(a(),l("div",Ke,[e("span",null,[y("\xBFEstas seguro de querer Eliminar el Pedido "),e("b",null,v(u.value.order_code),1),y("? "),Qe,Ze])])):n("",!0),e("div",et,[e("button",{class:"boton-close select-none cursor-pointer",type:"button",onClick:r[8]||(r[8]=f=>i("close_dialog",!1))},"Cancelar"),t.type!="VIEW"?(a(),l("input",{key:0,class:"boton-confirm select-none cursor-pointer",type:"submit",value:X(j)},null,8,tt)):n("",!0)])],40,re)]))}},lt=L(at,[["__scopeId","data-v-2f8e9635"]]);const R=t=>(z("data-v-faeaa6bd"),t=t(),B(),t),st={class:"flex flex-column"},ot=R(()=>e("div",{class:"header-tab flex align-items-center justify-content-between"},[e("div",{class:"flex align-items-center justify-content-center"}," Ordenes "),e("div",{class:"flex align-items-center justify-content-center"})],-1)),nt={class:"table-box flex flex-column align-items-center justify-content-center"},it={class:"w-full"},rt={class:"grid"},ct={class:"col text-center flex flex-column justify-content-center align-items-center"},ut={class:"col text-center flex flex-column justify-content-center align-items-center"},dt={class:"col text-center flex flex-column justify-content-center align-items-center"},mt={class:"col text-center flex flex-column justify-content-center align-items-center"},vt=["value"],ft={class:"col text-center flex flex-column justify-content-center align-items-center"},_t=["value"],yt={class:"col text-center flex flex-column justify-content-center align-items-center"},pt={class:"col text-center flex flex-column justify-content-center align-items-center"},ht={class:"flex justify-content-center align-items-center"},gt=R(()=>e("th",{class:"col text-center flex justify-content-center align-items-center"},"Acciones",-1)),bt={class:"table-body"},xt={class:"col text-center flex justify-content-center align-items-center"},Et={class:"col text-center flex justify-content-center align-items-center"},kt={class:"col text-center flex justify-content-center align-items-center"},Vt={class:"celda text-center flex justify-content-center align-items-center"},Ct={class:"celda text-center flex justify-content-center align-items-center"},It={class:"celda text-center flex justify-content-center align-items-center"},$t={class:"celda text-center flex justify-content-center align-items-center"},wt={class:"col text-center flex justify-content-center align-items-center"},At=["onClick"],Dt=["onClick"],Wt=["onClick"],St=["onClick"],Tt=["onClick"],jt=["onClick"],Ut={class:"flex flex-wrap justify-content-center"},Nt=["onClick"],Ot={__name:"Orders",setup(t){const i=_(!1),g=_(""),u=_(!1);_(),_({});const d=_({}),p=_(),S=_(),N=_(0),T=_(0),j=_(new F),$=_(!0),w=_(""),C=_(""),A=_(!1),s=_([{name:"Seleccionar",code:null},{name:"Cliente",code:"CLIENT"},{name:"Administrador",code:"ADMIN"}]),r=_([{name:"Seleccionar",code:null},{name:"Validos",code:!0},{name:"Invalidos",code:!1}]);se(()=>{d.value={client_id:null,order_code:null,status:null,courier_tracking:null,courier_service:null,min_val:null,max_val:null,start:null,end:null,page:1,size:10},b()});const f=c=>c?U(String(c)).locale("es").format("DD-MM-YYYY"):"Sin Fecha",b=()=>{u.value=!0,j.value.getOrders(d.value).then(c=>{S.value=c.items,N.value=c.total,T.value=c.pages,u.value=!1,$.value=!0}).catch(c=>{c.detail=="Signature has expired"?$.value?($.value=!1,setTimeout(()=>b(),1e3)):u.value=!1:(console.log("Error mounting: ",c),u.value=!1)})},G=c=>{g.value="EDIT",p.value=c,i.value=!0},H=c=>{g.value="DEL",p.value=c,i.value=!0},J=c=>{g.value="PASS",p.value=c,i.value=!0},K=c=>{g.value="AVATAR",p.value=c,i.value=!0},Q=c=>{g.value="ACTIVE",p.value=c,i.value=!0},Z=c=>{g.value="VIEW",j.value.getOrder(c.order_code).then(m=>{p.value=m,i.value=!0}).catch(m=>{console.log("Error mounting: ",m.detail)})},ee=c=>{g.value="",i.value=c,selected_user.value=null,b()},te=(c,m)=>{w.value=c,m=="success"?C.value="#0a8014":m=="warning"?C.value="#9c9426":m=="info"?C.value="#2374df":C.value="#b14646",A.value=!0,setTimeout(function(){A.value=!1},2e3)};return(c,m)=>{const I=oe("font-awesome-icon");return a(),l("div",st,[V(P,{name:"fade"},{default:q(()=>[A.value?(a(),Y(ne,{key:0,message:w.value,type:C.value},null,8,["message","type"])):n("",!0)]),_:1}),ot,e("div",nt,[e("table",it,[e("thead",null,[e("tr",rt,[e("th",ct,[y(" Codigo de Orden "),h(e("input",{id:"email","onUpdate:modelValue":m[0]||(m[0]=o=>d.value.email=o),onChange:b,type:"text",placeholder:"E-mail",class:"outline-none",name:"email"},null,544),[[E,d.value.email]])]),e("th",ut,[y(" Estado "),h(e("input",{id:"name","onUpdate:modelValue":m[1]||(m[1]=o=>d.value.name=o),onChange:b,type:"text",placeholder:"Nombre",class:"outline-none",name:"name"},null,544),[[E,d.value.name]])]),e("th",dt,[y(" Envio "),h(e("input",{id:"phone","onUpdate:modelValue":m[2]||(m[2]=o=>d.value.phone=o),onChange:b,type:"text",placeholder:"Tel\xE9fono",class:"outline-none",name:"phone"},null,544),[[E,d.value.phone]])]),e("th",mt,[y(" Usuario "),h(e("select",{onChange:b,id:"role","onUpdate:modelValue":m[3]||(m[3]=o=>d.value.role=o)},[(a(!0),l(D,null,W(s.value,(o,k)=>(a(),l("option",{key:k,value:o.code},v(o.name),9,vt))),128))],544),[[O,d.value.role]])]),e("th",ft,[y(" Direccion "),h(e("select",{onChange:b,id:"role","onUpdate:modelValue":m[4]||(m[4]=o=>d.value.active=o)},[(a(!0),l(D,null,W(r.value,(o,k)=>(a(),l("option",{key:k,value:o.code},v(o.name),9,_t))),128))],544),[[O,d.value.active]])]),e("th",yt,[y(" Precio "),h(e("input",{id:"birthday",onChange:b,"onUpdate:modelValue":m[5]||(m[5]=o=>d.value.birthday=o),type:"date",class:"outline-none",name:"birthday"},null,544),[[E,d.value.birthday]])]),e("th",pt,[y(" Creado "),e("div",ht,[h(e("input",{id:"start",onChange:b,"onUpdate:modelValue":m[6]||(m[6]=o=>d.value.start=o),type:"date",class:"outline-none calendar-icon start",name:"start"},null,544),[[E,d.value.start]]),h(e("input",{id:"end",onChange:b,"onUpdate:modelValue":m[7]||(m[7]=o=>d.value.end=o),type:"date",class:"outline-none calendar-icon end",name:"end"},null,544),[[E,d.value.end]])])]),gt])]),e("tbody",bt,[(a(!0),l(D,null,W(S.value,o=>(a(),l("tr",{key:o.order_code,class:"grid"},[e("td",xt,v(o.order_code),1),e("td",Et,v(o.status),1),e("td",kt,v(o.courier_service),1),e("td",Vt,v(o.client.email),1),e("td",Ct,v(o.direction),1),e("td",It,v(o.final_payment),1),e("td",$t,v(f(o.created)),1),e("td",wt,[e("div",{onClick:k=>Z(o),class:"boton-action vista mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[V(I,{icon:"fa-solid fa-address-card"})],8,At),e("div",{onClick:k=>Q(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[V(I,{icon:"fa-solid fa-check"})],8,Dt),e("div",{onClick:k=>K(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[V(I,{icon:"fa-solid fa-user"})],8,Wt),e("div",{onClick:k=>J(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[V(I,{icon:"fa-solid fa-key"})],8,St),e("div",{onClick:k=>G(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[V(I,{icon:"fa-solid fa-pencil"})],8,Tt),e("div",{onClick:k=>H(o),class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center"},[V(I,{icon:"fa-solid fa-trash-can"})],8,jt)])]))),128))]),e("tfoot",null,[e("div",Ut,[(a(!0),l(D,null,W(T.value,o=>(a(),l("div",{class:"indices-tabla select-none cursor-pointer",onClick:k=>c.change_page(o),key:o},v(o),9,Nt))),128))])])])]),V(P,{name:"dialog"},{default:q(()=>[i.value?(a(),Y(lt,{key:0,type:g.value,order:p.value,onClose_dialog:ee,onToast_execute:te},null,8,["type","order"])):n("",!0)]),_:1})])}}},Yt=L(Ot,[["__scopeId","data-v-faeaa6bd"]]);export{Yt as default};
