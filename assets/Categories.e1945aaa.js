import{_ as F,r as s,x as I,b as r,c as _,e,t as m,y as V,m as E,v as k,d as p,f as w,l as K,p as U,j as Y,o as Q,a as X,g as x,z as W,T as B,F as L,h as M,B as z}from"./index.d06e6f38.js";import{C as q}from"./categories-service.f3b18eb6.js";import{T as Z,h as ee}from"./moment.fc9cb90c.js";/* empty css                                                              */const S=l=>(U("data-v-7f32065a"),l=l(),Y(),l),te={id:"dialog-category"},ae=["onSubmit"],oe={class:"header-dialog flex align-items-center justify-content-center"},se={key:0,class:"field"},ne=S(()=>e("label",{for:"name"},"Nombre:",-1)),le={key:0,style:{color:"red"}},ce={key:1,class:"confirmation-content"},re=S(()=>e("br",null,null,-1)),ie=S(()=>e("i",null,"(Esta acci\xF3n no se puede revertir)",-1)),ue={class:"field flex align-items-center justify-content-center"},de=["value"],_e={__name:"DialogCategory",props:["type","category"],emits:["close_dialog","toast_execute"],setup(l,{emit:a}){const i=l,c=s(i.category),u=s(new q),d=s(!1),b=()=>{switch(d.value=!0,i.type){case"EDIT":u.value.updateCategory(c.value.id,c.value).then(()=>{a("toast_execute","Categoria editada exitosamente","success"),a("close_dialog",!1)}).catch(f=>{console.log("Error: ",f),a("toast_execute","Ocurrio un problema al editar la Categoria","error"),a("close_dialog",!1)});break;case"NEW":u.value.createCategory(c.value).then(()=>{a("toast_execute","Categoria creada exitosamente","success"),a("close_dialog",!1)}).catch(f=>{console.log("Error: ",f),a("toast_execute","Ocurrio un problema al crear la Categoria","error"),a("close_dialog",!1)});break;default:directionsService.value.deleteCategory(c.value.id).then(()=>{a("toast_execute","Categoria eliminada exitosamente","success"),a("close_dialog",!1)}).catch(f=>{console.log("Error: ",f),a("toast_execute","Ocurrio un problema al eliminar la Categoria","error"),a("close_dialog",!1)})}d.value=!1},j=I(()=>{switch(i.type){case"NEW":return"Nueva Categoria";case"EDIT":return"Editar Categoria";case"DEL":return"Eliminar Categoria";default:return c.value.name}}),C=I(()=>{switch(i.type){case"NEW":return"Crear";case"EDIT":return"Guardar Cambios";default:return"Eliminar"}});return(f,v)=>(r(),_("div",te,[e("form",{class:"dialog-content",onSubmit:K(b,["prevent"])},[e("div",oe,m(V(j)),1),l.type=="EDIT"||l.type=="NEW"?(r(),_("div",se,[ne,E(e("input",{id:"name","onUpdate:modelValue":v[0]||(v[0]=h=>c.value.name=h),required:"true",type:"text",autofocus:"",placeholder:"Nombre",class:"outline-none",name:"name"},null,512),[[k,c.value.name,void 0,{trim:!0}]]),d.value&&!c.value.name?(r(),_("small",le,"El Nombre es requerido.")):p("",!0)])):p("",!0),l.type=="DEL"?(r(),_("div",ce,[e("span",null,[w("\xBFEstas seguro de querer Eliminar la Categoria "),e("b",null,m(c.value.name),1),w("? "),re,ie])])):p("",!0),e("div",ue,[e("button",{class:"boton-close select-none cursor-pointer",type:"button",onClick:v[1]||(v[1]=h=>a("close_dialog",!1))},"Cancelar"),l.type!="VIEW"?(r(),_("input",{key:0,class:"boton-confirm select-none cursor-pointer",type:"submit",value:V(C)},null,8,de)):p("",!0)])],40,ae)]))}},fe=F(_e,[["__scopeId","data-v-7f32065a"]]);const T=l=>(U("data-v-3baa3b79"),l=l(),Y(),l),ve={class:"flex flex-column"},ge={class:"header-tab flex align-items-center justify-content-between"},me=T(()=>e("div",{class:"flex align-items-center justify-content-center"}," Categorias ",-1)),pe={class:"flex align-items-center justify-content-center"},he={class:"table-box flex flex-column align-items-center justify-content-center"},ye={class:"w-full"},xe={class:"grid"},be={class:"col text-center flex flex-column justify-content-center align-items-center"},Ce=T(()=>e("th",{class:"col text-center flex flex-column justify-content-center align-items-center"}," Subcategorias ",-1)),Ee={class:"celda text-center flex flex-column justify-content-center align-items-center"},ke={class:"flex justify-content-center align-items-center"},we=T(()=>e("th",{class:"col text-center flex justify-content-center align-items-center"},"Acciones",-1)),je={class:"table-body"},$e={class:"col text-center flex justify-content-center align-items-center"},De={class:"col text-center flex justify-content-center align-items-center"},Ne={class:"celda text-center flex justify-content-center align-items-center"},Se={class:"col text-center flex justify-content-center align-items-center"},Te=["onClick"],Ie=["onClick"],Ve=["onClick"],We={class:"flex flex-wrap justify-content-center"},Be=["onClick"],Le={__name:"Categories",setup(l){const a=s(!1),i=s(""),c=s(!1);s(),s({});const u=s({}),d=s(),b=s(),j=s(0),C=s(0),f=s(new q),v=s(!0),h=s(""),y=s(""),$=s(!1);Q(()=>{u.value={name:null,page:1,size:10},g()});const O=t=>t?ee(String(t)).locale("es").format("DD-MM-YYYY"):"Sin Fecha",g=()=>{c.value=!0,f.value.getCategories(u.value).then(t=>{b.value=t.items,j.value=t.total,C.value=t.pages,c.value=!1,v.value=!0}).catch(t=>{t.detail=="Signature has expired"?v.value?(v.value=!1,setTimeout(()=>g(),1e3)):c.value=!1:(console.log("Error mounting: ",t),c.value=!1)})},P=()=>{i.value="NEW",d.value={name:null},a.value=!0},A=t=>{i.value="EDIT",d.value=t,a.value=!0},G=t=>{i.value="DEL",d.value=t,a.value=!0},R=t=>{i.value="VIEW",f.value.getCategory(t.id).then(n=>{d.value=n,a.value=!0}).catch(n=>{console.log("Error mounting: ",n.detail)})},H=t=>{i.value="",a.value=t,d.value=null,g()},J=(t,n)=>{h.value=t,n=="success"?y.value="#0a8014":n=="warning"?y.value="#9c9426":n=="info"?y.value="#2374df":y.value="#b14646",$.value=!0,setTimeout(function(){$.value=!1},2e3)};return(t,n)=>{const D=X("font-awesome-icon");return r(),_("div",ve,[x(B,{name:"fade"},{default:W(()=>[$.value?(r(),z(Z,{key:0,message:h.value,type:y.value},null,8,["message","type"])):p("",!0)]),_:1}),e("div",ge,[me,e("div",pe,[e("button",{class:"boton-header new-btn select-none cursor-pointer",onClick:P},"Nueva Categoria"),e("button",{class:"boton-header excel-btn select-none cursor-pointer",onClick:n[0]||(n[0]=(...o)=>t.login&&t.login(...o))},"Descargar Excel")])]),e("div",he,[e("table",ye,[e("thead",null,[e("tr",xe,[e("th",be,[w(" Nombre "),E(e("input",{id:"name","onUpdate:modelValue":n[1]||(n[1]=o=>u.value.name=o),onChange:g,type:"text",placeholder:"Nombre",class:"outline-none",name:"name"},null,544),[[k,u.value.name]])]),Ce,e("th",Ee,[w(" Fecha de Creaci\xF3n "),e("div",ke,[E(e("input",{id:"start",onChange:g,"onUpdate:modelValue":n[2]||(n[2]=o=>u.value.start=o),type:"date",class:"outline-none calendar-icon start",name:"start"},null,544),[[k,u.value.start]]),E(e("input",{id:"end",onChange:g,"onUpdate:modelValue":n[3]||(n[3]=o=>u.value.end=o),type:"date",class:"outline-none calendar-icon end",name:"end"},null,544),[[k,u.value.end]])])]),we])]),e("tbody",je,[(r(!0),_(L,null,M(b.value,o=>(r(),_("tr",{key:o.id,class:"grid"},[e("td",$e,m(o.name),1),e("td",De,m(o.subcategories?o.subcategories.length:0),1),e("td",Ne,m(O(o.created)),1),e("td",Se,[e("div",{onClick:N=>R(o),class:"boton-action vista mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[x(D,{icon:"fa-solid fa-address-card"})],8,Te),e("div",{onClick:N=>A(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[x(D,{icon:"fa-solid fa-pencil"})],8,Ie),e("div",{onClick:N=>G(o),class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center"},[x(D,{icon:"fa-solid fa-trash-can"})],8,Ve)])]))),128))]),e("tfoot",null,[e("div",We,[(r(!0),_(L,null,M(C.value,o=>(r(),_("div",{class:"indices-tabla select-none cursor-pointer",onClick:N=>t.change_page(o),key:o},m(o),9,Be))),128))])])])]),x(B,{name:"dialog"},{default:W(()=>[a.value?(r(),z(fe,{key:0,type:i.value,category:d.value,onClose_dialog:H,onToast_execute:J},null,8,["type","category"])):p("",!0)]),_:1})])}}},Ye=F(Le,[["__scopeId","data-v-3baa3b79"]]);export{Ye as default};
