import{_ as R,r as m,x as q,b as l,c as s,e,t as v,y as Y,f as h,d as i,m as p,v as b,q as X,F as W,h as A,s as ne,l as ie,p as z,j as B,o as ce,a as re,g as C,z as L,T as P,B as O}from"./index.d06e6f38.js";import{U as F}from"./users-service.4dc01d16.js";import{h as S,T as ue}from"./moment.fc9cb90c.js";/* empty css                                                              */const x=a=>(z("data-v-5bfef594"),a=a(),B(),a),de={id:"dialog-user"},ve=["onSubmit"],fe={class:"header-dialog flex align-items-center justify-content-center"},me={key:0,class:"field"},_e=x(()=>e("label",{for:"email"},"E-mail:",-1)),ye={key:0,class:"info-view"},he={key:2,style:{color:"red"}},pe={key:1,class:"field"},ge=x(()=>e("label",{for:"first_name"},"Nombre:",-1)),xe={key:0,style:{color:"red"}},be={key:2,class:"field"},Ee=x(()=>e("label",{for:"last_name"},"Apellido:",-1)),ke={key:0,style:{color:"red"}},Ce={key:3,class:"field"},Ve={for:"password"},Ie={key:0,style:{color:"red"}},Ue={key:4,class:"field"},$e=x(()=>e("label",{for:"phone"},"Tel\xE9fono:",-1)),we={key:0,class:"info-view"},We={key:2,style:{color:"red"}},Ae={key:5,class:"field"},De=x(()=>e("label",{for:"birthday"},"Cumplea\xF1os:",-1)),Te={key:0,class:"info-view"},je={key:6,class:"field"},Se=x(()=>e("label",{for:"role"},"Tipo de usuario:",-1)),Ne={key:0,class:"info-view"},Me=["value"],Xe={key:2,style:{color:"red"}},qe={key:7,class:"field"},Ye=x(()=>e("label",{for:"created"},"Registrado:",-1)),Le={key:0,class:"info-view"},Pe={key:8,class:"field"},Oe=x(()=>e("label",{for:"updated"},"Ultima Actualizaci\xF3n:",-1)),Re={key:0,class:"info-view"},ze={key:9,class:"field"},Be=x(()=>e("label",{for:"orders"},"Ordenes:",-1)),Fe={key:0,class:"info-view"},Ge={key:10,class:"field"},He=x(()=>e("label",{for:"directions"},"Direcciones:",-1)),Je={key:0,class:"info-view"},Ke={key:11,class:"flex flex align-items-center"},Qe=x(()=>e("label",{class:"col-1 pl-0",for:"is_active"},"Estado:",-1)),Ze={key:0,class:"info-view col-11 flex align-items-center"},et={key:1,class:"col-11 flex align-items-center"},tt={key:12,class:"confirmation-content"},at=x(()=>e("br",null,null,-1)),lt=x(()=>e("i",null,"(Esta acci\xF3n no se puede revertir, y eliminara las direcciones y ordenes vinculadas a este Usuario)",-1)),st={class:"field flex align-items-center justify-content-center"},ot=["value"],nt={__name:"DialogUser",props:["type","user"],emits:["close_dialog","toast_execute"],setup(a,{emit:c}){const g=a,t=m(g.user),d=m(new F),_=m(!1),D=m([{name:"Seleccionar",code:null},{name:"Cliente",code:"CLIENT"},{name:"Administrador",code:"ADMIN"}]),N=()=>{_.value=!0;let y={};switch(g.type){case"EDIT":d.value.updateUser(t.value.id,t.value).then(()=>{c("toast_execute","Usuario editado exitosamente","success"),c("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),c("toast_execute","Ocurrio un problema al editar el Usuario","error"),c("close_dialog",!1)});break;case"NEW":d.value.createUser(t.value).then(()=>{c("toast_execute","Usuario creado exitosamente","success"),c("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),c("toast_execute","Ocurrio un problema al crear el Usuario","error"),c("close_dialog",!1)});break;case"DEL":d.value.deleteUser(t.value.id).then(()=>{c("toast_execute","Usuario eliminado exitosamente","success"),c("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),c("toast_execute","Ocurrio un problema al eliminar el Usuario","error"),c("close_dialog",!1)});break;case"PASS":y={email:t.value.email,password:t.value.password},d.value.changePass(t.value.id,y).then(()=>{c("toast_execute","Contrase\xF1a cambiada exitosamente","success"),c("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),c("toast_execute","Ocurrio un problema al cambiar la contrase\xF1a","error"),c("close_dialog",!1)});break;case"AVATAR":y={email:t.value.email,avatar:t.value.avatar},d.value.changeAvatar(t.value.id).then(()=>{c("toast_execute","Avatar cambiado exitosamente","success"),c("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),c("toast_execute","Ocurrio un problema al cambiar el avatar","error"),c("close_dialog",!1)});break;default:y={email:t.value.email,is_active:t.value.is_active},d.value.changeActive(t.value.id,y).then(()=>{c("toast_execute","Cambio de estado con exito","success"),c("close_dialog",!1)}).catch(r=>{console.log("Error: ",r),c("toast_execute","Ocurrio un problema al cambiar el estado","error"),c("close_dialog",!1)})}_.value=!1},T=q(()=>{switch(g.type){case"NEW":return"Nuevo Usuario";case"EDIT":return"Editar Usuario";case"DEL":return"Eliminar Usuario";case"AVATAR":return"Cambiar el Avatar";case"ACTIVE":return"Cambiar Estado";case"PASS":return"Cambiar Contrase\xF1a";default:return t.value.first_name.slice(0,1).toUpperCase()+t.value.first_name.slice(1)+" "+(t.value.last_name.slice(0,1).toUpperCase()+t.value.last_name.slice(1))}}),j=q(()=>{switch(g.type){case"NEW":return"Crear";case"EDIT":return"Guardar Cambios";case"DEL":return"Eliminar";default:return"Cambiar"}}),U=y=>y?(S.locale("es"),S(String(y)).format("DD-MMMM-YYYY")):"Sin Fecha",$=y=>y?S(String(y)).locale("es").format("DD-MM-YYYY [Hora:] hh:mm"):"Sin Fecha",V=y=>{switch(y){case"ADMIN":return"Administrador";default:return"Cliente"}},w=y=>{switch(y){case!0:return"Valido";default:return"Invalido"}};return(y,r)=>(l(),s("div",de,[e("form",{class:"dialog-content",onSubmit:ie(N,["prevent"])},[e("div",fe,v(Y(T)),1),a.type=="EDIT"||a.type=="NEW"||a.type=="VIEW"?(l(),s("div",me,[_e,h(),a.type=="VIEW"?(l(),s("span",ye,v(t.value.email),1)):i("",!0),a.type!="VIEW"?p((l(),s("input",{key:1,id:"email","onUpdate:modelValue":r[0]||(r[0]=f=>t.value.email=f),required:"true",type:"text",autofocus:"",placeholder:"E-mail",class:"outline-none",name:"email"},null,512)),[[b,t.value.email,void 0,{trim:!0}]]):i("",!0),_.value&&!t.value.email?(l(),s("small",he,"El E-mail es requerido.")):i("",!0)])):i("",!0),a.type=="EDIT"||a.type=="NEW"?(l(),s("div",pe,[ge,p(e("input",{id:"first_name","onUpdate:modelValue":r[1]||(r[1]=f=>t.value.first_name=f),required:"true",type:"text",autofocus:"",placeholder:"Nombre",class:"outline-none",name:"first_name"},null,512),[[b,t.value.first_name,void 0,{trim:!0}]]),_.value&&!t.value.first_name?(l(),s("small",xe,"El Nombre es requerido.")):i("",!0)])):i("",!0),a.type=="EDIT"||a.type=="NEW"?(l(),s("div",be,[Ee,p(e("input",{id:"last_name","onUpdate:modelValue":r[2]||(r[2]=f=>t.value.last_name=f),required:"true",type:"text",autofocus:"",placeholder:"Apellido",class:"outline-none",name:"last_name"},null,512),[[b,t.value.last_name,void 0,{trim:!0}]]),_.value&&!t.value.last_name?(l(),s("small",ke,"El Apellido es requerido.")):i("",!0)])):i("",!0),a.type=="PASS"||a.type=="NEW"?(l(),s("div",Ce,[e("label",Ve,v(a.type!="PASS"?"Contrase\xF1a":"Nueva contrase\xF1a")+":",1),p(e("input",{id:"password","onUpdate:modelValue":r[3]||(r[3]=f=>t.value.password=f),required:"true",type:"password",autofocus:"",placeholder:"Contrase\xF1a",class:"outline-none",name:"password"},null,512),[[b,t.value.password,void 0,{trim:!0}]]),_.value&&!t.value.password?(l(),s("small",Ie,"La contrase\xF1a es requerida.")):i("",!0)])):i("",!0),a.type=="EDIT"||a.type=="NEW"||a.type=="VIEW"?(l(),s("div",Ue,[$e,h(),a.type=="VIEW"?(l(),s("span",we,v(t.value.phone),1)):i("",!0),a.type!="VIEW"?p((l(),s("input",{key:1,id:"phone","onUpdate:modelValue":r[4]||(r[4]=f=>t.value.phone=f),required:"true",type:"text",autofocus:"",placeholder:"9XXXXXXXX",class:"outline-none",name:"phone"},null,512)),[[b,t.value.phone,void 0,{trim:!0}]]):i("",!0),_.value&&!t.value.phone?(l(),s("small",We,"El Telefono es requerido.")):i("",!0)])):i("",!0),a.type=="EDIT"||a.type=="VIEW"?(l(),s("div",Ae,[De,h(),a.type=="VIEW"?(l(),s("span",Te,v(U(t.value.birthday)),1)):i("",!0),a.type!="VIEW"?p((l(),s("input",{key:1,id:"birthday","onUpdate:modelValue":r[5]||(r[5]=f=>t.value.birthday=f),required:"true",type:"date",autofocus:"",placeholder:"9XXXXXXXX",class:"outline-none",name:"birthday"},null,512)),[[b,t.value.birthday,void 0,{trim:!0}]]):i("",!0)])):i("",!0),a.type=="EDIT"||a.type=="NEW"||a.type=="VIEW"?(l(),s("div",je,[Se,h(),a.type=="VIEW"?(l(),s("span",Ne,v(V(t.value.role)),1)):i("",!0),a.type!="VIEW"?p((l(),s("select",{key:1,id:"role","onUpdate:modelValue":r[6]||(r[6]=f=>t.value.role=f)},[(l(!0),s(W,null,A(D.value,(f,M)=>(l(),s("option",{key:M,value:f.code},v(f.name),9,Me))),128))],512)),[[X,t.value.role]]):i("",!0),_.value&&!t.value.role?(l(),s("small",Xe,"El tipo de usuario es requerido.")):i("",!0)])):i("",!0),a.type=="VIEW"?(l(),s("div",qe,[Ye,h(),a.type=="VIEW"?(l(),s("span",Le,v($(t.value.created)),1)):i("",!0)])):i("",!0),a.type=="VIEW"?(l(),s("div",Pe,[Oe,h(),a.type=="VIEW"?(l(),s("span",Re,v($(t.value.updated)),1)):i("",!0)])):i("",!0),a.type=="VIEW"?(l(),s("div",ze,[Be,h(),a.type=="VIEW"?(l(),s("span",Fe,v(t.value.orders?t.value.orders.length:"0"),1)):i("",!0)])):i("",!0),a.type=="VIEW"?(l(),s("div",Ge,[He,h(),a.type=="VIEW"?(l(),s("span",Je,v(t.value.directions?t.value.directions.length:"0"),1)):i("",!0)])):i("",!0),a.type=="ACTIVE"||a.type=="VIEW"?(l(),s("div",Ke,[Qe,h(),a.type=="VIEW"?(l(),s("span",Ze,v(w(t.value.is_active)),1)):i("",!0),a.type!="VIEW"?(l(),s("div",et,[p(e("input",{type:"checkbox","onUpdate:modelValue":r[7]||(r[7]=f=>t.value.is_active=f)},null,512),[[ne,t.value.is_active]])])):i("",!0)])):i("",!0),a.type=="DEL"?(l(),s("div",tt,[e("span",null,[h("\xBFEstas seguro de querer Eliminar a "),e("b",null,v(t.value.first_name.slice(0,1).toUpperCase()+t.value.first_name.slice(1))+" "+v(t.value.last_name.slice(0,1).toUpperCase()+t.value.last_name.slice(1)),1),h("? "),at,lt])])):i("",!0),e("div",st,[e("button",{class:"boton-close select-none cursor-pointer",type:"button",onClick:r[8]||(r[8]=f=>c("close_dialog",!1))},"Cancelar"),a.type!="VIEW"?(l(),s("input",{key:0,class:"boton-confirm select-none cursor-pointer",type:"submit",value:Y(j)},null,8,ot)):i("",!0)])],40,ve)]))}},it=R(nt,[["__scopeId","data-v-5bfef594"]]);const G=a=>(z("data-v-7d8e26da"),a=a(),B(),a),ct={class:"flex flex-column"},rt={class:"header-tab flex align-items-center justify-content-between"},ut=G(()=>e("div",{class:"flex align-items-center justify-content-center"}," Usuarios ",-1)),dt={class:"flex align-items-center justify-content-center"},vt={class:"table-box flex flex-column align-items-center justify-content-center"},ft={class:"w-full"},mt={class:"grid"},_t={class:"col text-center flex flex-column justify-content-center align-items-center"},yt={class:"col text-center flex flex-column justify-content-center align-items-center"},ht={class:"col text-center flex flex-column justify-content-center align-items-center"},pt={class:"celda text-center flex flex-column justify-content-center align-items-center"},gt=["value"],xt={class:"celda text-center flex flex-column justify-content-center align-items-center"},bt=["value"],Et={class:"celda text-center flex flex-column justify-content-center align-items-center"},kt={class:"celda text-center flex flex-column justify-content-center align-items-center"},Ct={class:"flex justify-content-center align-items-center"},Vt=G(()=>e("th",{class:"col text-center flex justify-content-center align-items-center"},"Acciones",-1)),It={class:"table-body"},Ut={class:"col text-center flex justify-content-center align-items-center"},$t={class:"col text-center flex justify-content-center align-items-center"},wt={class:"col text-center flex justify-content-center align-items-center"},Wt={class:"celda text-center flex justify-content-center align-items-center"},At={class:"celda text-center flex justify-content-center align-items-center"},Dt={class:"celda text-center flex justify-content-center align-items-center"},Tt={class:"celda text-center flex justify-content-center align-items-center"},jt={class:"col text-center flex justify-content-center align-items-center"},St=["onClick"],Nt=["onClick"],Mt=["onClick"],Xt=["onClick"],qt=["onClick"],Yt=["onClick"],Lt={class:"flex flex-wrap justify-content-center"},Pt=["onClick"],Ot={__name:"Users",setup(a){const c=m(!1),g=m(""),t=m(!1);m(),m({});const d=m({}),_=m(),D=m(),N=m(0),T=m(0),j=m(new F),U=m(!0),$=m(""),V=m(""),w=m(!1),y=m([{name:"Seleccionar",code:null},{name:"Cliente",code:"CLIENT"},{name:"Administrador",code:"ADMIN"}]),r=m([{name:"Seleccionar",code:null},{name:"Validos",code:!0},{name:"Invalidos",code:!1}]);ce(()=>{d.value={name:null,email:null,role:null,active:null,phone:null,birthday:null,start:null,end:null,page:1,size:10},E()});const f=n=>n?S(String(n)).locale("es").format("DD-MM-YYYY"):"Sin Fecha",M=n=>n.first_name.slice(0,1).toUpperCase()+n.first_name.slice(1)+" "+(n.last_name.slice(0,1).toUpperCase()+n.last_name.slice(1)),H=n=>{switch(n){case"ADMIN":return"Administrador";default:return"Cliente"}},J=n=>{switch(n){case!0:return"Valido";default:return"Invalido"}},E=()=>{t.value=!0,j.value.getUsers(d.value).then(n=>{D.value=n.items,N.value=n.total,T.value=n.pages,t.value=!1,U.value=!0}).catch(n=>{n.detail=="Signature has expired"?U.value?(U.value=!1,setTimeout(()=>E(),1e3)):t.value=!1:(console.log("Error mounting: ",n),t.value=!1)})},K=()=>{g.value="NEW",_.value={email:null,first_name:null,last_name:null,password:null,role:null,phone:null},c.value=!0},Q=n=>{g.value="EDIT",_.value=n,c.value=!0},Z=n=>{g.value="DEL",_.value=n,c.value=!0},ee=n=>{g.value="PASS",_.value=n,c.value=!0},te=n=>{g.value="AVATAR",_.value=n,c.value=!0},ae=n=>{g.value="ACTIVE",_.value=n,c.value=!0},le=n=>{g.value="VIEW",j.value.getUser(n.id).then(u=>{_.value=u,c.value=!0}).catch(u=>{console.log("Error mounting: ",u.detail)})},se=n=>{g.value="",c.value=n,_.value=null,E()},oe=(n,u)=>{$.value=n,u=="success"?V.value="#0a8014":u=="warning"?V.value="#9c9426":u=="info"?V.value="#2374df":V.value="#b14646",w.value=!0,setTimeout(function(){w.value=!1},2e3)};return(n,u)=>{const I=re("font-awesome-icon");return l(),s("div",ct,[C(P,{name:"fade"},{default:L(()=>[w.value?(l(),O(ue,{key:0,message:$.value,type:V.value},null,8,["message","type"])):i("",!0)]),_:1}),e("div",rt,[ut,e("div",dt,[e("button",{class:"boton-header new-btn select-none cursor-pointer",onClick:K},"Nuevo Usuario"),e("button",{class:"boton-header excel-btn select-none cursor-pointer",onClick:u[0]||(u[0]=(...o)=>n.login&&n.login(...o))},"Descargar Excel")])]),e("div",vt,[e("table",ft,[e("thead",null,[e("tr",mt,[e("th",_t,[h(" E-mail "),p(e("input",{id:"email","onUpdate:modelValue":u[1]||(u[1]=o=>d.value.email=o),onChange:E,type:"text",placeholder:"E-mail",class:"outline-none",name:"email"},null,544),[[b,d.value.email]])]),e("th",yt,[h(" Nombre "),p(e("input",{id:"name","onUpdate:modelValue":u[2]||(u[2]=o=>d.value.name=o),onChange:E,type:"text",placeholder:"Nombre",class:"outline-none",name:"name"},null,544),[[b,d.value.name]])]),e("th",ht,[h(" Tel\xE9fono "),p(e("input",{id:"phone","onUpdate:modelValue":u[3]||(u[3]=o=>d.value.phone=o),onChange:E,type:"text",placeholder:"Tel\xE9fono",class:"outline-none",name:"phone"},null,544),[[b,d.value.phone]])]),e("th",pt,[h(" Usuario "),p(e("select",{onChange:E,id:"role","onUpdate:modelValue":u[4]||(u[4]=o=>d.value.role=o)},[(l(!0),s(W,null,A(y.value,(o,k)=>(l(),s("option",{key:k,value:o.code},v(o.name),9,gt))),128))],544),[[X,d.value.role]])]),e("th",xt,[h(" Estado "),p(e("select",{onChange:E,id:"role","onUpdate:modelValue":u[5]||(u[5]=o=>d.value.active=o)},[(l(!0),s(W,null,A(r.value,(o,k)=>(l(),s("option",{key:k,value:o.code},v(o.name),9,bt))),128))],544),[[X,d.value.active]])]),e("th",Et,[h(" Cumplea\xF1os "),p(e("input",{id:"birthday",onChange:E,"onUpdate:modelValue":u[6]||(u[6]=o=>d.value.birthday=o),type:"date",class:"outline-none",name:"birthday"},null,544),[[b,d.value.birthday]])]),e("th",kt,[h(" Registro "),e("div",Ct,[p(e("input",{id:"start",onChange:E,"onUpdate:modelValue":u[7]||(u[7]=o=>d.value.start=o),type:"date",class:"outline-none calendar-icon start",name:"start"},null,544),[[b,d.value.start]]),p(e("input",{id:"end",onChange:E,"onUpdate:modelValue":u[8]||(u[8]=o=>d.value.end=o),type:"date",class:"outline-none calendar-icon end",name:"end"},null,544),[[b,d.value.end]])])]),Vt])]),e("tbody",It,[(l(!0),s(W,null,A(D.value,o=>(l(),s("tr",{key:o.id,class:"grid"},[e("td",Ut,v(o.email),1),e("td",$t,v(M(o)),1),e("td",wt,v(o.phone),1),e("td",Wt,v(H(o.role)),1),e("td",At,v(J(o.is_active)),1),e("td",Dt,v(f(o.birthday)),1),e("td",Tt,v(f(o.created)),1),e("td",jt,[e("div",{onClick:k=>le(o),class:"boton-action vista mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[C(I,{icon:"fa-solid fa-address-card"})],8,St),e("div",{onClick:k=>ae(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[C(I,{icon:"fa-solid fa-check"})],8,Nt),e("div",{onClick:k=>te(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[C(I,{icon:"fa-solid fa-user"})],8,Mt),e("div",{onClick:k=>ee(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[C(I,{icon:"fa-solid fa-key"})],8,Xt),e("div",{onClick:k=>Q(o),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[C(I,{icon:"fa-solid fa-pencil"})],8,qt),e("div",{onClick:k=>Z(o),class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center"},[C(I,{icon:"fa-solid fa-trash-can"})],8,Yt)])]))),128))]),e("tfoot",null,[e("div",Lt,[(l(!0),s(W,null,A(T.value,o=>(l(),s("div",{class:"indices-tabla select-none cursor-pointer",onClick:k=>n.change_page(o),key:o},v(o),9,Pt))),128))])])])]),C(P,{name:"dialog"},{default:L(()=>[c.value?(l(),O(it,{key:0,type:g.value,user:_.value,onClose_dialog:se,onToast_execute:oe},null,8,["type","user"])):i("",!0)]),_:1})])}}},Gt=R(Ot,[["__scopeId","data-v-7d8e26da"]]);export{Gt as default};
