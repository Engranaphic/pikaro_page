import{A as z,_ as O,n as D,u as E,r as h,o as F,b as o,c as i,d as l,t as u,f as v,m as _,q as k,F as x,h as S,e as r,v as U,s as M,p as N,i as B}from"./index.3e8f2ced.js";import{_ as $}from"./imagen.43a9ef84.js";import{P as K}from"./products-service.c120c5f1.js";import{O as X}from"./orders-service.c3d6bc7c.js";class G{createItem(g){const f={headers:{"Content-Type":"application/json"}};return z.post("/items/",g,f).then(m=>m.data)}deleteItem(g){return z.delete("/items/"+g).then(f=>f.data)}getItems(g){return z.get("/items/admin/",{params:g}).then(f=>f.data)}getItem(g){return z.get("/items/admin/"+g).then(f=>f.data)}}const c=q=>(N("data-v-d6434776"),q=q(),B(),q),H={id:"product"},J={class:"container-pro"},Q={key:0,class:"product-content grid"},W={class:"breadcrumb col-12"},Y={class:"col-6 flex flex-column align-items-center justify-content-center"},Z=c(()=>l("div",{class:"image"},[l("img",{src:$,alt:""})],-1)),ee={class:"button-text text-center select-none"},te={class:"col-6 flex flex-column align-items-start justify-content-start"},le={class:"flex align-items-center justify-content-start"},se={class:"footer-title"},oe={class:"ml-2"},ie={key:0,class:"flex flex-column w-full"},ne={class:"field"},ue=c(()=>l("label",null,"Cantidad",-1)),ae=["value"],re={key:0,class:"field"},de=c(()=>l("label",null,"Tama\xF1o",-1)),ce=["value"],pe={key:1,class:"field"},ve=c(()=>l("label",null,"Tipo de Papel",-1)),_e=["value"],me={key:2,class:"field"},he=c(()=>l("label",null,"Lados",-1)),fe=["value"],ge={key:3,class:"field"},ye=c(()=>l("label",null,"Tiempo de Producci\xF3n",-1)),ke=["value"],xe={key:4,class:"field"},Se=c(()=>l("label",null,"Perforado",-1)),be=["value"],qe={key:5,class:"field"},Ve=c(()=>l("label",null,"Corte Entrega",-1)),Ie=["value"],ze={key:6,class:"field"},Ce=c(()=>l("label",null,"Forma",-1)),Te=["value"],we={class:"field"},Pe=c(()=>l("label",null,"Comentario Adicional",-1)),Ue={class:"low-box flex align-items-center justify-content-between"},je={class:"field"},Le=c(()=>l("label",null,"Solicitar Dise\xF1o",-1)),Re={class:"flex flex-column align-items-end justify-content-center"},Ae=c(()=>l("div",{class:"text-info mt-3"}," Total (+ IVA) ",-1)),Oe={class:"text-price"},De={key:0,class:"mt-5"},Ee={key:1,class:"flex flex-column w-full"},Fe={class:"selected-option"},Me={key:0,class:"selected-option"},Ne={key:1,class:"selected-option"},Be={key:2,class:"selected-option"},$e={key:3,class:"selected-option"},Ke={key:4,class:"selected-option"},Xe={key:5,class:"selected-option"},Ge={key:6,class:"selected-option"},He={class:"selected-option"},Je={class:"selected-option"},Qe={class:"low-box flex flex-column align-items-end justify-content-center"},We={class:"flex flex-column align-items-end justify-content-end"},Ye=c(()=>l("div",{class:"text-info mt-3"}," Total (+ IVA) ",-1)),Ze={class:"text-price"},et={__name:"Product",props:["position","contact_pos"],emits:["form-pop","logo_home"],setup(q,{emit:g}){const f=D(),m=E(),j=h(new K),C=h(new X),L=h(new G),p=h(),n=h({quantity:null,size:null,paper:null,sides:null,time:null,hole:null,cut:null,shape:null}),s=h({quantity:null,size:null,paper:null,sides:null,time:null,hole:null,cut:null,shape:null,comment:{type:"comment",option:"",multiplier:1}}),d=h({product_sku:null,product_name:null,product_image:null,image_design:null,design:!1,price:null,pika_points:null,order_id:null,quantity:null,options:[]}),V=h(!1),T=h(!1),y=h(!0);F(()=>{let a=f.params.sku;sessionStorage.user_id&&(T.value=!0),j.value.getProduct(a).then(t=>{p.value=t,n.value.quantity=t.options.filter(e=>e.type==="quantity"),n.value.size=t.options.filter(e=>e.type==="size"),n.value.paper=t.options.filter(e=>e.type==="paper"),n.value.sides=t.options.filter(e=>e.type==="sides"),n.value.time=t.options.filter(e=>e.type==="time"),n.value.hole=t.options.filter(e=>e.type==="hole"),n.value.cut=t.options.filter(e=>e.type==="cut"),n.value.shape=t.options.filter(e=>e.type==="shape")}).catch(t=>{console.log("Error mounting: ",t.detail)})});const w=a=>a.slice(0,1).toUpperCase()+a.slice(1),I=()=>{if(sessionStorage.user_id){let a={client_id:sessionStorage.user_id,direction_id:null},t={client_id:sessionStorage.user_id,order_code:null,status:"creating",courier_tracking:null,courier_service:null,min_val:null,max_val:null,start:null,end:null,page:1,size:10};C.value.getOrders(t).then(e=>{e.items.length>0?(V.value=!0,y.value=!0,d.value.order_id=e.items[0].order_code):C.value.createOrders(a).then(b=>{V.value=!0,y.value=!0,d.value.order_id=b.order_code}).catch(b=>{b.detail=="Signature has expired"?y.value?(y.value=!1,setTimeout(()=>I(),1e3)):m.push({name:"RegLog"}):m.push({name:"RegLog"})})}).catch(e=>{e.detail=="Signature has expired"?y.value?(y.value=!1,setTimeout(()=>I(),1e3)):m.push({name:"RegLog"}):m.push({name:"RegLog"})})}else m.push({name:"RegLog"})},P=a=>{let t=a;s.value.quantity&&(t=t*s.value.quantity.multiplier),s.value.size&&(t=t*s.value.size.multiplier),s.value.paper&&(t=t*s.value.paper.multiplier),s.value.sides&&(t=t*s.value.sides.multiplier),s.value.time&&(t=t*s.value.time.multiplier),s.value.hole&&(t=t*s.value.hole.multiplier),s.value.cut&&(t=t*s.value.cut.multiplier),s.value.shape&&(t=t*s.value.shape.multiplier);let e=t.toString(),b=[];for(;e.length>3;)b.unshift(e.slice(-3)),e=e.slice(0,-3);return b.unshift(e),b.join(".")},R=a=>a?"Si":"No",A=()=>{d.value.product_sku=p.value.sku,d.value.product_name=p.value.name,d.value.price=p.value.price,d.value.pika_points=p.value.pika_points,d.value.product_image="",n.value.quantity.length==0?d.value.quantity=s.value.quantity:d.value.quantity=parseInt(s.value.quantity.option);for(let a in s.value)if(s.value[a]){let t={type:s.value[a].type,option:s.value[a].option,multiplier:s.value[a].multiplier};d.value.options.push(t)}console.log(d.value),L.value.createItem(d.value).then(a=>{console.log(a),m.push("/carrito/"+d.value.order_id)}).catch(a=>{a.detail=="Signature has expired"?y.value?(y.value=!1,setTimeout(()=>I(),1e3)):m.push({name:"RegLog"}):m.push({name:"RegLog"})})};return(a,t)=>(o(),i("div",H,[l("div",J,[p.value?(o(),i("div",Q,[l("div",W," Inicio > Productos > "+u(w(p.value.name)),1),l("div",Y,[Z,l("div",ee,u(p.value.description),1)]),l("div",te,[l("div",le,[l("div",se,u(w(p.value.name)),1),v(),l("i",oe,"SKU:"+u(p.value.sku),1)]),V.value?r("",!0):(o(),i("div",ie,[l("div",ne,[ue,n.value.quantity.length>0?_((o(),i("select",{key:0,id:"user","onUpdate:modelValue":t[0]||(t[0]=e=>s.value.quantity=e)},[(o(!0),i(x,null,S(n.value.quantity,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,ae))),128))],512)),[[k,s.value.quantity]]):r("",!0),n.value.quantity.length==0?_((o(),i("input",{key:1,type:"number",min:"1","onUpdate:modelValue":t[1]||(t[1]=e=>s.value.quantity=e)},null,512)),[[U,s.value.quantity]]):r("",!0)]),n.value.size.length>0?(o(),i("div",re,[de,_(l("select",{id:"user","onUpdate:modelValue":t[2]||(t[2]=e=>s.value.size=e)},[(o(!0),i(x,null,S(n.value.size,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,ce))),128))],512),[[k,s.value.size]])])):r("",!0),n.value.paper.length>0?(o(),i("div",pe,[ve,_(l("select",{id:"user","onUpdate:modelValue":t[3]||(t[3]=e=>s.value.paper=e)},[(o(!0),i(x,null,S(n.value.paper,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,_e))),128))],512),[[k,s.value.paper]])])):r("",!0),n.value.sides.length>0?(o(),i("div",me,[he,_(l("select",{id:"user","onUpdate:modelValue":t[4]||(t[4]=e=>s.value.sides=e)},[(o(!0),i(x,null,S(n.value.sides,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,fe))),128))],512),[[k,s.value.sides]])])):r("",!0),n.value.time.length>0?(o(),i("div",ge,[ye,_(l("select",{id:"user","onUpdate:modelValue":t[5]||(t[5]=e=>s.value.time=e)},[(o(!0),i(x,null,S(n.value.time,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,ke))),128))],512),[[k,s.value.time]])])):r("",!0),n.value.hole.length>0?(o(),i("div",xe,[Se,_(l("select",{id:"user","onUpdate:modelValue":t[6]||(t[6]=e=>s.value.hole=e)},[(o(!0),i(x,null,S(n.value.hole,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,be))),128))],512),[[k,s.value.hole]])])):r("",!0),n.value.cut.length>0?(o(),i("div",qe,[Ve,_(l("select",{id:"user","onUpdate:modelValue":t[7]||(t[7]=e=>s.value.cut=e)},[(o(!0),i(x,null,S(n.value.cut,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,Ie))),128))],512),[[k,s.value.cut]])])):r("",!0),n.value.shape.length>0?(o(),i("div",ze,[Ce,_(l("select",{id:"user","onUpdate:modelValue":t[8]||(t[8]=e=>s.value.shape=e)},[(o(!0),i(x,null,S(n.value.shape,e=>(o(),i("option",{key:e.id,value:e},u(e.option),9,Te))),128))],512),[[k,s.value.shape]])])):r("",!0),l("div",we,[Pe,_(l("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.value.comment.option=e)},null,512),[[U,s.value.comment.option]])]),l("div",Ue,[l("div",je,[Le,_(l("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>d.value.design=e)},null,512),[[M,d.value.design]])]),l("div",Re,[l("div",{onClick:I,class:"boton-confirm select-none cursor-pointer"}," Continuar "),Ae,l("div",Oe," $"+u(P(p.value.price)),1),T.value?r("",!0):(o(),i("div",De," Aun no has ingresado o creado una cuenta, se te recomienda primero hacerlo antes de hacer tu pedido. "))])])])),V.value?(o(),i("div",Ee,[l("div",Fe,[v(" Cantidad: "),l("span",null,u(s.value.quantity.option),1)]),n.value.size.length>0?(o(),i("div",Me,[v(" Tama\xF1o: "),l("span",null,u(s.value.size.option),1)])):r("",!0),n.value.paper.length>0?(o(),i("div",Ne,[v(" Tipo de Papel: "),l("span",null,u(s.value.paper.option),1)])):r("",!0),n.value.sides.length>0?(o(),i("div",Be,[v(" Lados: "),l("span",null,u(s.value.sides.option),1)])):r("",!0),n.value.time.length>0?(o(),i("div",$e,[v(" Tiempo de Producci\xF3n: "),l("span",null,u(s.value.time.option),1)])):r("",!0),n.value.hole.length>0?(o(),i("div",Ke,[v(" Perforado: "),l("span",null,u(s.value.hole.option),1)])):r("",!0),n.value.cut.length>0?(o(),i("div",Xe,[v(" Corte Entrega: "),l("span",null,u(s.value.cut.option),1)])):r("",!0),n.value.shape.length>0?(o(),i("div",Ge,[v(" Forma: "),l("span",null,u(s.value.shape.option),1)])):r("",!0),l("div",He,[v(" Comentario Adicional: "),l("span",null,u(s.value.comment.option),1)]),l("div",Je,[v(" Dise\xF1o Solicitado: "),l("span",null,u(R(d.value.design)),1)]),l("div",Qe,[l("div",We,[Ye,l("div",Ze," $"+u(P(p.value.price)),1)]),l("div",{onClick:A,class:"boton-confirm select-none cursor-pointer"}," A\xF1adir al Carrito ")])])):r("",!0)])])):r("",!0)])]))}},it=O(et,[["__scopeId","data-v-d6434776"]]);export{it as default};
