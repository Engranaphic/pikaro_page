import{_ as F,r as i,x as L,b as l,c,d as e,t as v,y as M,m as g,v as b,e as _,q as S,F as E,h as C,f as x,l as ne,p as O,i as R,o as oe,a as se,g as j,z as B,T as z,B as Y}from"./index.b2c756c8.js";import{P as A}from"./products-service.5f8d544c.js";import{C as le}from"./categories-service.397edf34.js";import{T as ae,h as ce}from"./moment.b485beb3.js";/* empty css                                                              */const k=a=>(O("data-v-7cbc8556"),a=a(),R(),a),ie={id:"dialog-product"},re=["onSubmit"],ue={class:"header-dialog flex align-items-center justify-content-center"},de={key:0,class:"field"},me=k(()=>e("label",{for:"name"},"Nombre:",-1)),ve={key:0,style:{color:"red"}},fe={key:1,class:"field"},_e=k(()=>e("label",{for:"price"},"Precio:",-1)),pe={key:0,style:{color:"red"}},ge={key:2,class:"field"},ye=k(()=>e("label",{for:"description"},"Descripcion:",-1)),he={key:0,style:{color:"red"}},xe={key:3,class:"field"},be=k(()=>e("label",{for:"category_id"},"Categoria:",-1)),ke=["value"],Ee={key:4,class:"field"},Ce=k(()=>e("label",{for:"banner"},"Destacado:",-1)),De=["value"],$e={key:5,class:"confirmation-content"},Pe=k(()=>e("br",null,null,-1)),je=k(()=>e("i",null,"(Esta acci\xF3n no se puede revertir)",-1)),we={class:"field flex align-items-center justify-content-center"},Ne=["value"],Ie={__name:"DialogProduct",props:["type","product","list"],emits:["close_dialog","toast_execute"],setup(a,{emit:r}){const p=a,o=i(p.product),d=i(new A),f=i(!1),w=i([{name:"Seleccionar",code:null},{name:"Destacados",code:!0},{name:"No Destacados",code:!1}]),T=()=>{switch(f.value=!0,p.type){case"EDIT":d.value.updateProduct(o.value.id,o.value).then(()=>{r("toast_execute","Producto editado exitosamente","success"),r("close_dialog",!1)}).catch(h=>{console.log("Error: ",h),r("toast_execute","Ocurrio un problema al editar el Producto","error"),r("close_dialog",!1)});break;case"NEW":d.value.createProduct(o.value).then(()=>{r("toast_execute","Producto creado exitosamente","success"),r("close_dialog",!1)}).catch(h=>{console.log("Error: ",h),r("toast_execute","Ocurrio un problema al crear el Producto","error"),r("close_dialog",!1)});break;default:d.value.deleteProduct(o.value.id).then(()=>{r("toast_execute","Producto eliminado exitosamente","success"),r("close_dialog",!1)}).catch(h=>{console.log("Error: ",h),r("toast_execute","Ocurrio un problema al eliminar el Producto","error"),r("close_dialog",!1)})}f.value=!1},N=L(()=>{switch(p.type){case"NEW":return"Nuevo Producto";case"EDIT":return"Editar Producto";case"DEL":return"Eliminar Producto";default:return o.value.name.slice(0,1).toUpperCase()+o.value.name.slice(1)}}),I=L(()=>{switch(p.type){case"NEW":return"Crear";case"EDIT":return"Guardar Cambios";default:return"Eliminar"}});return(h,m)=>(l(),c("div",ie,[e("form",{class:"dialog-content",onSubmit:ne(T,["prevent"])},[e("div",ue,v(M(N)),1),a.type=="EDIT"||a.type=="NEW"?(l(),c("div",de,[me,g(e("input",{id:"name","onUpdate:modelValue":m[0]||(m[0]=u=>o.value.name=u),required:"true",type:"text",autofocus:"",placeholder:"Nombre",class:"outline-none",name:"name"},null,512),[[b,o.value.name,void 0,{trim:!0}]]),f.value&&!o.value.name?(l(),c("small",ve,"El Nombre es requerido.")):_("",!0)])):_("",!0),a.type=="EDIT"||a.type=="NEW"?(l(),c("div",fe,[_e,g(e("input",{id:"price","onUpdate:modelValue":m[1]||(m[1]=u=>o.value.price=u),required:"true",type:"number",autofocus:"",placeholder:"Precio",class:"outline-none",name:"price"},null,512),[[b,o.value.price,void 0,{trim:!0}]]),f.value&&!o.value.price?(l(),c("small",pe,"El Precio es requerido.")):_("",!0)])):_("",!0),a.type=="EDIT"||a.type=="NEW"?(l(),c("div",ge,[ye,g(e("input",{id:"description","onUpdate:modelValue":m[2]||(m[2]=u=>o.value.description=u),required:"true",type:"text",autofocus:"",placeholder:"Descripcion",class:"outline-none",name:"description"},null,512),[[b,o.value.description,void 0,{trim:!0}]]),f.value&&!o.value.description?(l(),c("small",he,"La Descripcion es requerida.")):_("",!0)])):_("",!0),a.type=="EDIT"||a.type=="NEW"||a.type=="VIEW"?(l(),c("div",xe,[be,g(e("select",{id:"category_id","onUpdate:modelValue":m[3]||(m[3]=u=>o.value.category_id=u)},[(l(!0),c(E,null,C(a.list,u=>(l(),c("option",{key:u.id,value:u.id},v(u.name),9,ke))),128))],512),[[S,o.value.category_id]])])):_("",!0),a.type=="EDIT"||a.type=="NEW"||a.type=="VIEW"?(l(),c("div",Ee,[Ce,g(e("select",{id:"banner","onUpdate:modelValue":m[4]||(m[4]=u=>o.value.banner=u)},[(l(!0),c(E,null,C(w.value,(u,D)=>(l(),c("option",{key:D,value:u.code},v(u.name),9,De))),128))],512),[[S,o.value.banner]])])):_("",!0),a.type=="DEL"?(l(),c("div",$e,[e("span",null,[x("\xBFEstas seguro de querer Eliminar a "),e("b",null,v(o.value.name.slice(0,1).toUpperCase()+o.value.name.slice(1)),1),x("? "),Pe,je])])):_("",!0),e("div",we,[e("button",{class:"boton-close select-none cursor-pointer",type:"button",onClick:m[5]||(m[5]=u=>r("close_dialog",!1))},"Cancelar"),a.type!="VIEW"?(l(),c("input",{key:0,class:"boton-confirm select-none cursor-pointer",type:"submit",value:M(I)},null,8,Ne)):_("",!0)])],40,re)]))}},Se=F(Ie,[["__scopeId","data-v-7cbc8556"]]);const V=a=>(O("data-v-56cbf43b"),a=a(),R(),a),Ve={class:"flex flex-column"},Te={class:"header-tab flex align-items-center justify-content-between"},Ue=V(()=>e("div",{class:"flex align-items-center justify-content-center"}," Productos ",-1)),We={class:"flex align-items-center justify-content-center"},qe={class:"table-box flex flex-column align-items-center justify-content-center"},Le={class:"w-full"},Me={class:"grid"},Be={class:"col text-center flex flex-column justify-content-center align-items-center"},ze={class:"col text-center flex flex-column justify-content-center align-items-center"},Ye=V(()=>e("th",{class:"col text-center flex flex-column justify-content-center align-items-center"}," Imagen ",-1)),Fe=V(()=>e("th",{class:"col text-center flex flex-column justify-content-center align-items-center"}," Precio ",-1)),Oe={class:"col text-center flex flex-column justify-content-center align-items-center"},Re=["value"],Ae={class:"col text-center flex flex-column justify-content-center align-items-center"},Ge=["value"],Ke={class:"col text-center flex flex-column justify-content-center align-items-center"},He={class:"flex justify-content-center align-items-center"},Je=V(()=>e("th",{class:"col text-center flex justify-content-center align-items-center"},"Acciones",-1)),Qe={class:"table-body"},Xe={class:"col text-center flex justify-content-center align-items-center"},Ze={class:"col text-center flex justify-content-center align-items-center"},et={class:"col text-center flex justify-content-center align-items-center"},tt=["src","alt"],nt={class:"col text-center flex justify-content-center align-items-center"},ot={class:"col text-center flex justify-content-center align-items-center"},st={class:"col text-center flex justify-content-center align-items-center"},lt={class:"col text-center flex justify-content-center align-items-center"},at={class:"col text-center flex justify-content-center align-items-center"},ct=["onClick"],it=["onClick"],rt=["onClick"],ut={class:"flex flex-wrap justify-content-center"},dt=["onClick"],mt={__name:"Products",setup(a){const r=i(!1),p=i(""),o=i(!1);i(),i({});const d=i({}),f=i(),w=i(),T=i(0),N=i(0),I=i(new A),h=i(new le),m=i(!0),u=i(new URL("/assets/imagen.37d4a644.webp",self.location).href),D=i(),q=i(""),$=i(""),U=i(!1),G=i([{name:"Seleccionar",code:null},{name:"Destacados",code:!0},{name:"No Destacados",code:!1}]);oe(()=>{d.value={sku:null,category:null,name:null,banner:null,min_val:null,max_val:null,page:1,size:10},y();let n={name:null,category_id:null};h.value.getListSubcategories(n).then(s=>{D.value=s}).catch(s=>{console.log("Error mounting: ",s.detail)})});const K=n=>n?ce(String(n)).locale("es").format("DD-MM-YYYY"):"Sin Fecha",H=n=>{switch(n){case!0:return"Destacado";default:return"No Destacado"}},y=()=>{o.value=!0,I.value.getProducts(d.value).then(n=>{w.value=n.items,T.value=n.total,N.value=n.pages,o.value=!1,m.value=!0}).catch(n=>{n.detail=="Signature has expired"?m.value?(m.value=!1,setTimeout(()=>y(),1e3)):o.value=!1:(console.log("Error mounting: ",n),o.value=!1)})},J=()=>{p.value="NEW",f.value={name:null,images:null,price:null,pika_points:0,description:null,category_id:null,banner:null},r.value=!0},Q=n=>{p.value="EDIT",f.value=n,r.value=!0},X=n=>{p.value="DEL",f.value=n,r.value=!0},Z=n=>{p.value="VIEW",I.value.getProduct(n.id).then(s=>{f.value=s,r.value=!0}).catch(s=>{console.log("Error mounting: ",s.detail)})},ee=n=>{p.value="",r.value=n,f.value=null,y()},te=(n,s)=>{q.value=n,s=="success"?$.value="#0a8014":s=="warning"?$.value="#9c9426":s=="info"?$.value="#2374df":$.value="#b14646",U.value=!0,setTimeout(function(){U.value=!1},2e3)};return(n,s)=>{const W=se("font-awesome-icon");return l(),c("div",Ve,[j(z,{name:"fade"},{default:B(()=>[U.value?(l(),Y(ae,{key:0,message:q.value,type:$.value},null,8,["message","type"])):_("",!0)]),_:1}),e("div",Te,[Ue,e("div",We,[e("button",{class:"boton-header new-btn select-none cursor-pointer",onClick:J},"Nuevo Producto"),e("button",{class:"boton-header excel-btn select-none cursor-pointer",onClick:s[0]||(s[0]=(...t)=>n.login&&n.login(...t))},"Descargar Excel")])]),e("div",qe,[e("table",Le,[e("thead",null,[e("tr",Me,[e("th",Be,[x(" SKU "),g(e("input",{id:"name","onUpdate:modelValue":s[1]||(s[1]=t=>d.value.sku=t),onChange:y,type:"text",placeholder:"Nombre",class:"outline-none",name:"name"},null,544),[[b,d.value.sku]])]),e("th",ze,[x(" Nombre "),g(e("input",{id:"name","onUpdate:modelValue":s[2]||(s[2]=t=>d.value.name=t),onChange:y,type:"text",placeholder:"Nombre",class:"outline-none",name:"name"},null,544),[[b,d.value.name]])]),Ye,Fe,e("th",Oe,[x(" Destacado "),g(e("select",{onChange:y,id:"banner","onUpdate:modelValue":s[3]||(s[3]=t=>d.value.banner=t)},[(l(!0),c(E,null,C(G.value,(t,P)=>(l(),c("option",{key:P,value:t.code},v(t.name),9,Re))),128))],544),[[S,d.value.banner]])]),e("th",Ae,[x(" Categoria "),g(e("select",{onChange:y,id:"role","onUpdate:modelValue":s[4]||(s[4]=t=>d.value.category=t)},[(l(!0),c(E,null,C(D.value,t=>(l(),c("option",{key:t.id,value:t.id},v(t.name),9,Ge))),128))],544),[[S,d.value.category]])]),e("th",Ke,[x(" Creado "),e("div",He,[g(e("input",{id:"start",onChange:y,"onUpdate:modelValue":s[5]||(s[5]=t=>d.value.start=t),type:"date",class:"outline-none calendar-icon start",name:"start"},null,544),[[b,d.value.start]]),g(e("input",{id:"end",onChange:y,"onUpdate:modelValue":s[6]||(s[6]=t=>d.value.end=t),type:"date",class:"outline-none calendar-icon end",name:"end"},null,544),[[b,d.value.end]])])]),Je])]),e("tbody",Qe,[(l(!0),c(E,null,C(w.value,t=>(l(),c("tr",{key:t.sku,class:"grid"},[e("td",Xe,v(t.sku),1),e("td",Ze,v(t.name),1),e("td",et,[e("img",{src:t.images?t.images[0]:u.value,alt:t.name},null,8,tt)]),e("td",nt,"$"+v(t.price),1),e("td",ot,v(H(t.banner)),1),e("td",st,v(t.category?t.category.name:"Sin Categoria"),1),e("td",lt,v(K(t.created)),1),e("td",at,[e("div",{onClick:P=>Z(t),class:"boton-action vista mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[j(W,{icon:"fa-solid fa-address-card"})],8,ct),e("div",{onClick:P=>Q(t),class:"boton-action edit mx-2 select-none cursor-pointer flex justify-content-center align-items-center"},[j(W,{icon:"fa-solid fa-pencil"})],8,it),e("div",{onClick:P=>X(t),class:"boton-action trash select-none cursor-pointer flex justify-content-center align-items-center"},[j(W,{icon:"fa-solid fa-trash-can"})],8,rt)])]))),128))]),e("tfoot",null,[e("div",ut,[(l(!0),c(E,null,C(N.value,t=>(l(),c("div",{class:"indices-tabla select-none cursor-pointer",onClick:P=>n.change_page(t),key:t},v(t),9,dt))),128))])])])]),j(z,{name:"dialog"},{default:B(()=>[r.value?(l(),Y(Se,{key:0,type:p.value,list:D.value,product:f.value,onClose_dialog:ee,onToast_execute:te},null,8,["type","list","product"])):_("",!0)]),_:1})])}}},yt=F(mt,[["__scopeId","data-v-56cbf43b"]]);export{yt as default};
